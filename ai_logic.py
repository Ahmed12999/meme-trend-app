def ai_decision(rsi, macd, signal, price_change, volume):
    decision = ""

    # RSI ржмрж┐рж╢рзНрж▓рзЗрж╖ржг
    if rsi < 30:
        decision += "ЁЯУЙ RSI ржХржо (Oversold)ред ржжрж╛ржо ржмрж╛рзЬрж╛рж░ рж╕ржорзНржнрж╛ржмржирж╛ ржЖржЫрзЗред\n"
    elif rsi > 70:
        decision += "ЁЯУИ RSI ржмрзЗрж╢рж┐ (Overbought)ред ржжрж╛ржо ржХржорждрзЗ ржкрж╛рж░рзЗред\n"
    else:
        decision += "ЁЯУК RSI ржорж╛ржЭрж╛ржорж╛ржЭрж┐, ржорж╛рж░рзНржХрзЗржЯ рж╕рж╛ржЗржбржУрзЯрзЗ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред\n"

    # MACD ржмрж┐рж╢рзНрж▓рзЗрж╖ржг
    if macd.iloc[-1] > signal.iloc[-1]:
        decision += "тЬЕ MACD bullish crossover (Buy signal)ред\n"
    elif macd.iloc[-1] < signal.iloc[-1]:
        decision += "тЭМ MACD bearish crossover (Sell signal)ред\n"
    else:
        decision += "тП╕я╕П MACD ржирж┐рж░ржкрзЗржХрзНрж╖ред\n"

    # ржкрзНрж░рж╛ржЗрж╕ ржЪрзЗржЮрзНржЬ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг
    if price_change > 1:
        decision += f"ЁЯЪА 1h ржкрзНрж░рж╛ржЗрж╕ +{price_change:.2f}% тАФ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржорзБржнржорзЗржирзНржЯ!\n"
    elif price_change < -1:
        decision += f"тЪая╕П 1h ржкрзНрж░рж╛ржЗрж╕ {price_change:.2f}% тАФ ржжрзБрж░рзНржмрж▓рждрж╛ред\n"
    else:
        decision += f"тП│ 1h ржкрзНрж░рж╛ржЗрж╕ ржкрж░рж┐ржмрж░рзНрждржи ржЦрзБржм ржХржоред\n"

    # ржирждрзБржи ржлрж┐ржЪрж╛рж░ рзз: ржнрж▓рж┐ржЙржо рж╕рзНржкрж╛ржЗржХ ржбрж┐ржЯрзЗржХрж╢ржи
    avg_volume = 1000000  # ржзрж░рзЛ, рзирзк ржШржирзНржЯрж╛рж░ ржЧрзЬ ржнрж▓рж┐ржЙржо ржПржЦрж╛ржирзЗ (рждрзЛржорж╛рж░ ржбрзЗржЯрж╛ ржерзЗржХрзЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЛ)
    if volume > avg_volume * 1.5:
        decision += "ЁЯУИ ржнрж▓рж┐ржЙржо рж╕рзНржкрж╛ржЗржХ! ржЯрзНрж░рзЗржбрзЗ ржЙржЪрзНржЪ рж╕ржХрзНрж░рж┐рзЯрждрж╛ ржЪрж▓ржЫрзЗред\n"
    else:
        decision += "ЁЯУЙ ржнрж▓рж┐ржЙржо рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХред\n"

    # AI ржЪрзВрзЬрж╛ржирзНржд рж╕рж┐ржжрзНржзрж╛ржирзНржд
    if rsi < 35 and macd.iloc[-1] > signal.iloc[-1] and volume > avg_volume:
        decision += "\nЁЯЯв **AI ржкрж░рж╛ржорж░рзНрж╢: ржПржЦржи ржжрж╛ржо ржмрж╛рзЬрждрзЗ ржкрж╛рж░рзЗ, ржЯрзНрж░рзЗржб ржирж┐ржиред**"
    elif rsi > 70 and macd.iloc[-1] < signal.iloc[-1]:
        decision += "\nЁЯФ┤ **AI ржкрж░рж╛ржорж░рзНрж╢: ржжрж╛ржо ржЕржирзЗржХ ржмрзЗрзЬрзЗржЫрзЗ, ржПржЦржи рж╕рзЗрж▓ ржмрж╛ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржиред**"
    else:
        decision += "\nЁЯЯб **AI ржкрж░рж╛ржорж░рзНрж╢: ржорж╛рж░рзНржХрзЗржЯ ржЕржирж┐рж╢рзНржЪрж┐ржд, ржХрж┐ржЫрзБржХрзНрж╖ржг ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржиред**"

    return decision


def bollinger_breakout_signal(price, upper_band, lower_band):
    if price > upper_band:
        return "ЁЯЪи ржжрж╛ржо Upper Bollinger Band ржПрж░ ржЙржкрж░рзЗ тАФ Breakout рж╣рждрзЗ ржкрж╛рж░рзЗ!"
    elif price < lower_band:
        return "ЁЯФ╗ ржжрж╛ржо Lower Bollinger Band ржПрж░ ржирж┐ржЪрзЗ тАФ Sell Pressure!"
    else:
        return "ЁЯУК ржжрж╛ржо Bollinger Band ржПрж░ ржнрзЗрждрж░рзЗ тАФ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ ржЧрждрж┐ржмрж┐ржзрж┐ред"


# ржирждрзБржи ржлрж┐ржЪрж╛рж░ рзи: Simple Moving Average (SMA) ржХрзНрж░рж╕ржУржнрж╛рж░ ржЪрзЗржХрж╛рж░
def calculate_sma_crossover(short_sma, long_sma):
    """
    short_sma, long_sma : pandas.Series
    ржпржжрж┐ short_sma, long_sma ржХрзЗ ржЙржкрж░рзЗ ржерзЗржХрзЗ ржирж┐ржЪрзЗ ржХрзНрж░рж╕ ржХрж░рзЗ тЖТ Sell рж╕рж┐ржЧржирзНржпрж╛рж▓
    ржпржжрж┐ ржирж┐ржЪ ржерзЗржХрзЗ ржЙржкрж░рзЗ ржХрзНрж░рж╕ ржХрж░рзЗ тЖТ Buy рж╕рж┐ржЧржирзНржпрж╛рж▓
    """
    if len(short_sma) < 2 or len(long_sma) < 2:
        return "рж╕рж┐ржЧржирзНржпрж╛рж▓ рждржерзНржп ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯржирж┐ред"

    prev_short = short_sma.iloc[-2]
    prev_long = long_sma.iloc[-2]
    curr_short = short_sma.iloc[-1]
    curr_long = long_sma.iloc[-1]

    if prev_short < prev_long and curr_short > curr_long:
        return "ЁЯЯв SMA ржХрзНрж░рж╕ржУржнрж╛рж░ - Buy рж╕рж┐ржЧржирзНржпрж╛рж▓"
    elif prev_short > prev_long and curr_short < curr_long:
        return "ЁЯФ┤ SMA ржбрзЗржержХрзНрж░рж╕ - Sell рж╕рж┐ржЧржирзНржпрж╛рж▓"
    else:
        return "тЪк SMA рж╕рж┐ржЧржирзНржпрж╛рж▓ ржирзЗржЗ"


# ржирждрзБржи ржлрж┐ржЪрж╛рж░ рзй: ржЯрзНрж░рзЗржирзНржб ржорзБржб ржмрзЛржЭрж╛рж░ ржЬржирзНржп MACD рж╣рж┐рж╖рзНржЯрзЛржЧрзНрж░рж╛ржо
def macd_histogram_signal(macd, signal):
    """
    MACD ржПржмржВ рж╕рж┐ржЧржирзНржпрж╛рж▓рзЗрж░ ржкрж╛рж░рзНржержХрзНржпрзЗрж░ рж╣рж┐рж╖рзНржЯрзЛржЧрзНрж░рж╛ржо ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзЗ ржЯрзНрж░рзЗржирзНржб ржЕржирзБржорж╛ржи
    """
    histogram = macd - signal
    if histogram.iloc[-1] > 0 and histogram.iloc[-2] <= 0:
        return "ЁЯЯв MACD рж╣рж┐рж╖рзНржЯрзЛржЧрзНрж░рж╛ржо ржЗрждрж┐ржмрж╛ржЪржХ ржкрзНрж░ржмржгрждрж╛ рж╢рзБрж░рзБ ржХрж░рзЗржЫрзЗред"
    elif histogram.iloc[-1] < 0 and histogram.iloc[-2] >= 0:
        return "ЁЯФ┤ MACD рж╣рж┐рж╖рзНржЯрзЛржЧрзНрж░рж╛ржо ржирзЗрждрж┐ржмрж╛ржЪржХ ржкрзНрж░ржмржгрждрж╛ рж╢рзБрж░рзБ ржХрж░рзЗржЫрзЗред"
    else:
        return "тЪк MACD рж╣рж┐рж╖рзНржЯрзЛржЧрзНрж░рж╛ржо рж╕рзНржерж┐рждрж┐рж╢рзАрж▓ред"
        
